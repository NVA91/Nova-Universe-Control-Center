---
- name: "Deploy Proxmox Stack ‚Äì Phase 1: Docker Services"
  hosts: proxmox_nodes
  serial: 1
  become: false
  gather_facts: false
  
  # ‚≠ê KRITISCH: Roles-Path relativ zu Playbook-Verzeichnis
  vars:
    ansible_roles_path: "{{ playbook_dir }}/../roles"
  
  pre_tasks:
    - name: "Display Deployment Info"
      debug:
        msg: |
          üöÄ Deploying Proxmox Stack to: {{ inventory_hostname }}

  roles:
    - { role: docker_services, tags: ["docker"] }

  post_tasks:
    - name: "Deployment Complete"
      debug:
        msg: |
          ‚úÖ Proxmox Stack deployment finished!
          
          üîó Access Points:
          - Semaphore:  http://localhost:3000
          - Traefik Dashboard: https://localhost:8080
